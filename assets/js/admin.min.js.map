{"version":3,"sources":["admin.js"],"names":["rox_wpwl_configs","window","wp","document","config","wpConf","event","preventDefault","$body","$","tb_show","is_edit","find","length","wishlist_container","onDrop","_super","$list","container","update_idx","idx","each","$item","this","attr","replace","replacePattern","$container","$el","match","val","sortable","handle","wishlist","template","text","on","prepend","closest","addClass","prependTo","$genericHidden","$genericShown","ready","_deps_object_id","indexOf","$wishlistContainer","show","is","hide","enable_sharing","share_modal_label","e","$selected","$shortcode","trigger","$pluginInstallSearch","admin_wishlist_shared","_","debounce","eventtype","data","searchLocation","_ajax_nonce","updates","ajaxNonce","s","target","value","tab","page","type","pagenow","$pluginFilter","location","href","split","param","omit","which","searchTerm","history","replaceState","$searchTab","append","class","l10n","searchResultsLabel","removeClass","prev","remove","searchRequest","abort","response","items","count","a11y","speak","noPluginsFound","jQuery","_wpUpdatesSettings"],"mappings":"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","file":"admin.min.js","sourcesContent":["/**!\n * RoxWPWL\n * Admin Scripts\n * @since 1.0.0\n * @version 1.0.0\n * @author PluginRox\n * @copyright PluginRox\n */\nvar rox_wpwl_configs = rox_wpwl_configs || {};\nwindow.wp = window.wp || {};\nwindow._wpUpdatesSettings = window._wpUpdatesSettings || {};\n;(function ($, window, document, config, wp, wpConf ) {\n\t\"use strict\";\n\tfunction wishlist() {\n\t\t// @link https://johnny.github.io/jquery-sortable/\n\t\tvar wishlist_container = \"ol.wishlist-items.sortable\";\n\t\t$(wishlist_container).sortable({\n\t\t\thandle: 'a.move-item',\n\t\t\tonDrop: function  ($item, container, _super) {\n\t\t\t\t_super($item, container);\n\t\t\t\tupdate_idx();\n\t\t\t}\n\t\t});\n\t\tfunction update_idx() {\n\t\t\tvar $container = $(wishlist_container),\n\t\t\t\t$list = $container.find('li'),\n\t\t\t\treplacePattern = /\\d/g,\n\t\t\t\tidx = 1;\n\t\t\t$list.each( function() {\n\t\t\t\tvar $item = $(this);\n\t\t\t\t$item.attr( 'id', $item.attr( 'id' ).replace( replacePattern, idx ) );\n\t\t\t\t$item.find('label, input, select, textarea').each(function() {\n\t\t\t\t\tvar $el = $(this);\n\t\t\t\t\tif( $el.attr( 'for' ) ) $el.attr( 'for', $el.attr( 'for' ).replace( replacePattern, idx ) );\n\t\t\t\t\tif( $el.attr( 'id' ) ) $el.attr( 'id', $el.attr( 'id' ).replace( replacePattern, idx ) );\n\t\t\t\t\tif( $el.attr( 'name' ) ) {\n\t\t\t\t\t\tif( $el.attr( 'name' ).match( /\\[menu_order\\]$/g ) ) $el.val( idx );\n\t\t\t\t\t\t$el.attr( 'name', $el.attr( 'name' ).replace( replacePattern, idx ) );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tidx++;\n\t\t\t} );\n\t\t}\n\t\tvar template = $('#wishlist-item-template').text();\n\t\t$(document).on('click', 'a.add-item', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tvar $container = $('ol.wishlist-items.sortable');\n\t\t\t$container.prepend( template.replace( /__idx__/g, $container.find('li').length+1 ) );\n\t\t\tupdate_idx();\n\t\t}).on('click', 'a.remove-item', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tvar $item = $(this).closest('li'),\n\t\t\t\t$itemDelete = $item.find('input[name$=\"[deleted]\"]');\n\t\t\t// idx = $item.attr( 'id' ).replace( 'item_', '' );\n\t\t\t$itemDelete.val(1);\n\t\t\t\n\t\t\t$item.closest('li').appendTo( 'ol.wishlist-items.sortable' );\n\t\t\t$item.hide();\n\t\t\t$item.addClass('deleted');\n\t\t\tupdate_idx();\n\t\t}).on('click', '.undo-delete', function (event) {\n\t\t\tevent.preventDefault();\n\t\t\tvar $item = $(this).closest('li'),\n\t\t\t\t$itemDelete = $item.find('input[name$=\"[deleted]\"]');\n\t\t\t$itemDelete.val(0);\n\t\t\t$item.removeClass('deleted');\n\t\t\t$item.closest('li').prependTo( 'ol.wishlist-items.sortable' );\n\t\t\tupdate_idx();\n\t\t});/*.on('click', 'a.edit-item', function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tvar $item = $(this).closest('li');\n\t\t\t$item.addClass( 'edit' );\n\t\t} );*/\n\t\t\n\t}\n\tfunction admin_wishlist_shared() {\n\t\t$(document).on( 'click', '.share_list', function( event ) {\n\t\t\tevent.preventDefault();\n\t\t\t// Thickbox doesn't trigger events on regular modals\n\t\t\ttb_show( config.share_modal_label, '#?TB_inline=1&inlineId=wishlist_contributors' );\n\t\t});\n\t\t$(document).on( 'change', '.input[name=\"visibility\"]', function(){\n\t\t\tif( $(this).val() == 'private' ) {\n\t\t\t}\n\t\t} );\n\t}\n\t$(document).ready(function () {\n\t\tvar $body = $('body');\n\t\tif( config.is_edit ) {\n\t\t\tvar $wishlistContainer = $body.find('.rox_wpwl_items');\n\t\t\tif( $wishlistContainer.length ) {\n\t\t\t\twishlist();\n\t\t\t}\n\t\t\t$(document).on( 'change', '.content_type select', function() {\n\t\t\t\tvar $genericHidden = $(this).closest( '.item-group' ).find('.object_id, .object-html'),\n\t\t\t\t\t$object_id = $(this).closest( '.item-group' ).find('.object_id'),\n\t\t\t\t\t$object_html = $(this).closest( '.item-group' ).find('.object-html'),\n\t\t\t\t\t$genericShown = $(this).closest('.item-group').find('.title,.content');\n\t\t\t\tif( config._deps_object_id.length > 0 && config._deps_object_id.indexOf( $(this).val() ) !== -1 ) {\n\t\t\t\t\t// if( ! $object_id.is( ':visible' ) ) $object_id.show();\n\t\t\t\t\t// if( ! $object_html.is( ':visible' ) ) $object_html.show();\n\t\t\t\t\tif( ! $genericHidden.is(':visible') ) $genericHidden.show();\n\t\t\t\t\tif( $genericShown.is(':visible') ) $genericShown.hide();\n\t\t\t\t} else {\n\t\t\t\t\t// if( $object_id.is( ':visible' ) ) $object_id.hide();\n\t\t\t\t\t// if( $object_html.is( ':visible' ) ) $object_html.hide();\n\t\t\t\t\tif( $genericHidden.is(':visible') ) $genericHidden.hide();\n\t\t\t\t\tif( ! $genericShown.is(':visible') ) $genericShown.show();\n\t\t\t\t}\n\t\t\t} );\n\t\t\tif( config.enable_sharing ) {\n\t\t\t\tadmin_wishlist_shared();\n\t\t\t}\n\t\t}\n\t\t$body.find('.wishlist_button_style input[type=\"radio\"]').on('change', function( e ) {\n\t\t\tvar $selected = $(this);\n\t\t\tif( $selected.is(':checked') ) {\n\t\t\t\tvar $shortcode = $body.find('.shortcode input');\n\t\t\t\t$shortcode.val( $shortcode.val().replace( /style=\".+\"/g, 'style=\"'+$selected.val()+'\"'  ) );\n\t\t\t\t$shortcode.trigger( 'change' );\n\t\t\t\t$shortcode.select();\n\t\t\t}\n\t\t}).trigger('change');\n\t\tvar $pluginInstallSearch = $( '.plugin-rox.rox-install .wp-filter-search' );\n\t\tif( $pluginInstallSearch.length > 0 ) {\n\t\t\tvar $pluginFilter        = $( '#plugin-filter' );\n\t\t\t$pluginInstallSearch.attr( 'aria-describedby', 'live-search-desc' );\n\t\t\t// settings = _.extend( settings, window._wpUpdatesItemCounts || {} );\n\t\t\t/**\n\t\t\t * Handles changes to the plugin search box on the new-plugin page,\n\t\t\t * searching the repository dynamically.\n\t\t\t *\n\t\t\t */\n\t\t\t$pluginInstallSearch.on( 'keyup input', _.debounce( function( event, eventtype ) {\n\t\t\t\tvar $searchTab = $( '.plugin-install-search' ), data, searchLocation;\n\n\t\t\t\tdata = {\n\t\t\t\t\t_ajax_nonce: wp.updates.ajaxNonce,\n\t\t\t\t\ts:           event.target.value,\n\t\t\t\t\ttab:         'search',\n\t\t\t\t\tpage:\t\t 'rox_plugins',\n\t\t\t\t\ttype:        $( '#typeselector' ).val(),\n\t\t\t\t\tpagenow:     pagenow\n\t\t\t\t};\n\t\t\t\tsearchLocation = location.href.split( '?' )[ 0 ] + '?' + $.param( _.omit( data, [ '_ajax_nonce', 'pagenow' ] ) );\n\n\t\t\t\t// Clear on escape.\n\t\t\t\tif ( 'keyup' === event.type && 27 === event.which ) {\n\t\t\t\t\tevent.target.value = '';\n\t\t\t\t}\n\n\t\t\t\tif ( wp.updates.searchTerm === data.s && 'typechange' !== eventtype ) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t$pluginFilter.empty();\n\t\t\t\t\twp.updates.searchTerm = data.s;\n\t\t\t\t}\n\n\t\t\t\tif ( window.history && window.history.replaceState ) {\n\t\t\t\t\twindow.history.replaceState( null, '', searchLocation );\n\t\t\t\t}\n\n\t\t\t\tif ( ! $searchTab.length ) {\n\t\t\t\t\t$searchTab = $( '<li class=\"plugin-install-search\" />' )\n\t\t\t\t\t\t.append( $( '<a />', {\n\t\t\t\t\t\t\t'class': 'current',\n\t\t\t\t\t\t\t'href': searchLocation,\n\t\t\t\t\t\t\t'text': wp.updates.l10n.searchResultsLabel\n\t\t\t\t\t\t} ) );\n\n\t\t\t\t\t$( '.wp-filter .filter-links .current' )\n\t\t\t\t\t\t.removeClass( 'current' )\n\t\t\t\t\t\t.parents( '.filter-links' )\n\t\t\t\t\t\t.prepend( $searchTab );\n\n\t\t\t\t\t$pluginFilter.prev( 'p' ).remove();\n\t\t\t\t\t$( '.plugins-popular-tags-wrapper' ).remove();\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' !== typeof wp.updates.searchRequest ) {\n\t\t\t\t\twp.updates.searchRequest.abort();\n\t\t\t\t}\n\t\t\t\t$( 'body' ).addClass( 'loading-content' );\n\n\t\t\t\twp.updates.searchRequest = wp.ajax.post( 'pluginrox_search_install_plugins', data ).done( function( response ) {\n\t\t\t\t\t$( 'body' ).removeClass( 'loading-content' );\n\t\t\t\t\t$pluginFilter.append( response.items );\n\t\t\t\t\tdelete wp.updates.searchRequest;\n\n\t\t\t\t\tif ( 0 === response.count ) {\n\t\t\t\t\t\twp.a11y.speak( wp.updates.l10n.noPluginsFound );\n\t\t\t\t\t} else {\n\t\t\t\t\t\twp.a11y.speak( wp.updates.l10n.pluginsFound.replace( '%d', response.count ) );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}, 500 ) );\n\t\t}\n\n\t});\n})(jQuery, window, document, rox_wpwl_configs, window.wp, window._wpUpdatesSettings);"]}